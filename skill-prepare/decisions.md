# 关键决策记录

> 本文档记录在 Skill 开发过程中做出的所有重要决策

## 决策模板

```
## [决策编号] 决策标题
- **日期**: YYYY-MM-DD
- **状态**: 待定 | 已决策 | 已实施 | 已废弃
- **决策者**: 用户 | 团队讨论
- **背景**: 为什么需要做这个决策？
- **选项**:
  - 选项A: 描述
  - 选项B: 描述
- **决策**: 选择了哪个选项？
- **理由**: 为什么选择这个选项？
- **影响**: 这个决策会影响什么？
```

---

## [D001] 文章下载方案选择
- **日期**: 2025-11-15
- **状态**: 待定
- **背景**: 需要从外部 URL 下载文章内容
- **选项**:
  - 选项A: 使用 Jina API (HTTP 调用)
  - 选项B: 使用 Jina MCP (Model Context Protocol)
- **决策**: 待定
- **理由**: 待讨论
- **影响**: 影响 Skill 的实现方式和依赖关系

---

## [D002] 多语言目标语言
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 需要将文章翻译为4种语言
- **选项**: 英文、中文、法语、韩语
- **决策**: 支持以下4种语言
  - 英文 (en)
  - 中文 (zh)
  - 法语 (fr)
  - 韩语 (ko)
- **理由**: 用户确认
- **影响**: 影响文件组织结构和翻译工作流，需要为每种语言创建相应的目录和配置

---

## [D003] 文章分类策略
- **日期**: 2025-11-15
- **状态**: 待定
- **背景**: 需要将文章归类到合适的 category
- **选项**:
  - 选项A: 完全自动分类（基于内容分析）
  - 选项B: 半自动（AI 建议 + 人工确认）
  - 选项C: 完全人工选择
- **决策**: 待定
- **理由**: 待讨论
- **影响**: 影响工作流程的自动化程度

---

## [D004] 图片存储位置
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 下载的图片需要存储在项目中
- **选项**:
  - 选项A: 正式发布图片在 `/public/`
  - 选项B: 临时源文件在 `source/` 或归档目录
- **决策**: 双重存储策略
  - **正式图片**: `/public/images/docs/{article-slug}/`
  - **源文件归档**: 在归档目录下保存原始图片
- **理由**:
  - public 目录是 Next.js 静态资源标准位置
  - 源文件归档便于追溯和备份
- **影响**:
  - MDX 中引用: `/images/docs/{article-slug}/image.png`
  - 归档目录同时保留原始图片

---

## [D005] 归档目录结构
- **日期**: 2025-11-15
- **状态**: 待定
- **背景**: 需要归档原始文章和图片
- **选项**:
  - 选项A: 按日期组织 `/archive/2025-11-15/`
  - 选项B: 按分类组织 `/archive/category-name/`
  - 选项C: 按域名组织 `/archive/example.com/`
  - 选项D: 扁平结构 `/archive/article-slug/`
- **决策**: 待定
- **理由**: 待讨论
- **影响**: 影响归档文件的查找和管理

---

## [D006] 翻译质量控制流程
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 需要确定翻译后的质量控制流程
- **选项**:
  - 选项A: 翻译后人工审核
  - 选项B: 自动翻译自动发布
- **决策**: 选项B - 自动翻译自动发布
- **理由**: 用户确认不需要人工审核，提高效率
- **影响**: 简化工作流，但需要高质量的翻译 prompt 和充分的测试

---

## [D007] 翻译提示词管理
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 翻译提示词如何管理和存储
- **选项**:
  - 选项A: 每次翻译时动态生成
  - 选项B: 提前写入 skill 作为参考材料
- **决策**: 选项B - 提前写入 skill
- **理由**: 用户确认，提示词会提前写入 skill，不需要保存版本记录
- **影响**: Skill 需要包含针对每种语言优化的翻译 prompt

---

## [D008] 图片命名规则
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 需要确定下载图片的命名规则
- **选项**:
  - 选项A: 保持原文件名
  - 选项B: 使用递增序号
  - 选项C: 使用内容哈希
- **决策**: 使用描述性名称 + 递增序号
  - 格式: `{descriptive-name}-{index}.{ext}`
  - 示例: `component-tree-1.png`, `data-flow-2.jpg`
- **理由**:
  - 描述性名称提高可读性和可维护性
  - 递增序号避免冲突
  - 便于人工查看和管理
- **影响**: 需要从原文件名或上下文提取描述性名称

---

## [D009] 图片下载失败处理
- **日期**: 2025-11-15
- **状态**: ✅ 已决策
- **背景**: 图片下载可能失败（403、404、网络错误等）
- **选项**:
  - 选项A: 重试多次直到成功
  - 选项B: 重试一次后放弃
  - 选项C: 立即放弃
- **决策**: 选项B - 重试一次，再失败就放弃
- **理由**: 平衡可靠性和效率，避免长时间阻塞
- **影响**:
  - 失败的图片保留原始 URL
  - 在日志中记录失败信息
  - 不阻止整体流程继续

---

## 决策待办清单

- [ ] D001: 文章下载方案选择
- [x] D002: 多语言目标语言 ✅
- [ ] D003: 文章分类策略
- [x] D004: 图片存储位置 ✅
- [ ] D005: 归档目录结构
- [x] D006: 翻译质量控制流程 ✅
- [x] D007: 翻译提示词管理 ✅
- [x] D008: 图片命名规则 ✅
- [x] D009: 图片下载失败处理 ✅
